import DefaultLineGraph from '../../example/Graphs-Carbon/LineGraph/BasicLineGraphs/SimpleLine?dev-site-example';
import DefaultGraphConfig from '@cerner/terra-graphs-docs/lib/example-datasets/graphConfigObjects/Line/lineDefault.js?dev-site-codeblock';
import DefaultDataObject from '@cerner/terra-graphs-docs/lib/example-datasets/dataObjects/Line/dataset1.js?dev-site-codeblock';
import TimeseriesLineGraph from '../../example/Graphs-Carbon/LineGraph/BasicLineGraphs/Timeseries?dev-site-example';
import TimeseriesGraphConfig from '@cerner/terra-graphs-docs/lib/example-datasets/graphConfigObjects/Line/lineTimeseries.js?dev-site-codeblock';
import TimeseriesDataObject from '@cerner/terra-graphs-docs/lib/example-datasets/dataObjects/Line/datasetTimeseries1.js?dev-site-codeblock';
require('details-polyfill');

# Line

A native line graph using D3 based on standard design patterns.

-   [Line](#line)
    -   [Getting Started](#getting-started)
    -   [Usage](#usage)
    -   [Config Structure](#configuration-structure)
    -   [Config properties](#configuration-properties)
    -   [Dataset Structure](#dataset-structure)
        -  [Dataset Structure for Line graph](#dataset-structure-for-line-graph)
        -  [Dataset Structure for Spline graph](#dataset-structure-for-spline-graph)
    -   [Dataset Properties](#dataset-properties)
        -  [Style](#style)
        -  [Legend Options](#legend-options)
        -  [Values](#values)
        -  [Regions](#regions)
        -  [Constraints](#constraints)
    -  [Examples](#examples)


## Getting Started

- Install with [npmjs](https://www.npmjs.com):
  - `npm i @cerner/carbon-graphs --save-dev`

## Usage

An instance of Line graph is obtained as follows:

```js
Carbon.api.line(/* dataset */)
```
A Line graph can be plotted as follows:

```js
import Carbon from '@cerner/carbon-graphs/dist/js/carbon-graphs.js';
import '@cerner/carbon-graphs/dist/css/carbon-graphs.css';
const graph = Carbon.api.graph(/* graph config JSON */);
graph.loadContent(Carbon.api.line(/* dataset 1 */));

// Multiple datasets can be added:
graph.loadContent(Carbon.api.line(/* dataset 1 */));
graph.loadContent(Carbon.api.line(/* dataset 2 */));
```

## Configuration Structure

You will **not** need all the properties in the example below.
Check [Graph](../GettingStarted/GraphCore/Documentation/Graph) for graph configuration properties.

```js
var root = {
    bindTo: <String>,
    axis: {
        x: {
            type: <string>,
            label: <string>,
            lowerLimit: <number> or <Date>,
            upperLimit: <number> or <Date>,
        },
        y: {
            label: <string>,
            lowerLimit: <number>,
            upperLimit: <number>,
        },
        y2: {
            show: <bool>,
            label: <string>,
            lowerLimit: <number>,
            upperLimit: <number>,
        }
    },
    dateline: [
        {
            showDatelineIndicator: <bool>,
            label: {
                display: <string>
            },
            color: <hex value as string>,
            shape: <shape SVG>,
            onClick: <function>,
            value: <date object>
        }
    ],
    clickPassThrough: {
        datelines: <bool>
    },
    showLabel: <bool>,
    showLegend: <bool>,
    showShapes: <bool>,
    showVGrid: <bool>,
    showHGrid: <bool>,
};
```

## Configuration Properties

Refer [Graph](../GettingStarted/GraphCore/Documentation/Graph) for graph configuration properties.


## Dataset Structure

- ### Dataset Structure for Line graph
        ```js
        var data = {
            key: <string>,
            label: {
                display: <string>,
            },
            style: <object>,
            regions: [
                {
                    axis: <"y" or "y2">,
                    start: <number>,
                    end: <number>,
                    color: <hex value as string>,
                }
            ],
            shape: <shape SVG>,
            color: <hex value as string>,
            onClick: <function>,
            values: [
                {
                    x: <number or Date object>,
                    y: <number>,
                },
                {
                    x: <number or Date object>,
                    y: <number>,
                    isCritical: <bool>
                },
            ]
        };
        ```

- ### Dataset Structure for Spline graph

      For a Spline Graph you can use same [syntax](#usage) as line graph and content can be loaded as follows:

        ```js
        var splineData = {
            key: <string>,
            label: {
                display: <string>
            },
            type: <"SPLINE" or "LINEAR">, /*SPLINE should be used to create SPLINE graph.*/
            values: [
                {
                    x: <number or Date object>,
                    y: <number>,
                },
                {
                    x: <number or Date object>,
                    y: <number>,
                },
            ]
        };
        ```

## Dataset Properties

| Property Name | Type     | Required   |Default             | Description                                                                                    |
| ------------- | -------- | ---------- | ------------------ | ---------------------------------------------------------------------------------------------- |
| key           | string   | yes        | -                  |Unique id which represents the data-set                                                         |
| values        | Array    | yes        | -                  |[Values](#values)                                                                               |
| color         | string   | no         | COLORS.BLACK       | Color for the data point and line                                                              |
| label         | object   | no         | {}                 | Display value for the data-set which the data points belong to                                 |
| legendOptions | object   | no         | undefined          | Toggle to show shape, line and legend. Refer [LegendOptions](#legend-options)                   |
| onClick       | Function | no         | undefined          | Any action that can be performed when clicking on the data point                               |
| regions       | array    | no         | []                 | Refer [Regions](#regions)                                                                      |
| shape         | string   | no         | SHAPES.DARK.CIRCLE | Shape for representing the data points                                                         |
| style         | object   | no         | {}                 | Any style that can be applied. Refer [Styles](#style)                                          |
| showShapes    | boolean  | no         | undefined          | Option to show/hide shapes per data set. This option overrides the graph's showShapes property |
| type          | string   | no         | LINE_TYPE.LINEAR   | Nature of line that needs to be drawn (Linear or Cardinal)                                     |
| yAxis         | string   | no         | "y"                | Setting for using different Y based axis. For now: its either Y or Y2                          |

- #### Style

    Each line can have a style object in [Values](#values) level.

    ```js
       style: { strokeDashArray: '2,2' },
    ```

    | Property Name   | Type     | Required   | Default | Description                                            |
    | --------------- | -------- | ---------- | ------- | ------------------------------------------------------ |
    | strokeDashArray | string   | no         | "0"     | Applies stroke-dasharray CSS property to the SVG line. |

- #### Legend Options

    Each line can have a legendOptions object in [Values](#values) level.
    ```js
      legendOptions: {
        showLine: <bool>,
        showShape: <bool>,
        style: <object>,
      },
    ```

    | Property Name | Type     | Required |Default | Description                                           |
    | ------------- | -------- | -------- | -------  | ----------------------------------------------------- |
    | showLine      | boolean  | no       | false    | Display Line in the legend.                           |
    | showShape     | boolean  | no       | true     | Display Shape in the legend.                          |
    | style         | object   | no       | {}       | Any style that can be applied. Refer [Styles](#style) |
    | showElement   | boolean  | no       | true     | Toggle to hide legend when legend item has no data.   |

- #### Values

    ```js
        values: [
            {
                x: <number or Date object>,
                y: <number>,
            },
            {
                x: <number or Date object>,
                y: <number>,
                isCritical: <bool>
            },
        ]
    ```
    | Property Name | Type     | Required | Default | Description                                                 |
    | ------------- | -------- | -------- | ------- | ---------------------------------------------------------- |
    | x             | string   | yes      | -       | Co-ordinate x, for plotting the data point                 |
    | y             | string   | yes      | -       | Co-ordinate y, for plotting the data point                 |
    | isCritical    | boolean  | no       | `false` | Shows an indicator surrounding the data point when enabled |
    | region        | object   | no       | {}      | Refer [Regions](#regions)                                  |

- #### Regions

    -   Each data-set can have 1 or more regions.
    -   Each value can have a region object.
    -   `start` and `end` is necessary for rendering an area.
    -   If at least one region is defined for a value in the element, it will take precedence over the element's region and the element's region will not be displayed.

    ```js
      regions: [
        {
          axis: <"y" or "y2">,
          start: <number>,
          end: <number>,
          color: <hex value as string>,
        },
      ],
    ```
    | Property Name | Type     | Required | Default                                                                                         | Description                           |
    | ------------- | -------- | -------- | ------------------------------------------------------------------------------------------------| ------------------------------------- |
    | start         | number   | yes      | -                                                                                               | Start of the region                   |
    | end           | number   | yes      | -                                                                                               | End of the region                     |
    | axis          | string   | yes      |"y"                                                                                              | Defines which axis if represents from |
    | color         | string   | yes      | <img width="16px" height="16px" src="https://placehold.it/15/f4f4f4/000000?text=+" /> `#f4f4f4` | Default color of the region area      |

- #### Constraints
    -  If data-set `label` display is not provided then the legend item will not be shown as well.

## Examples
<DefaultLineGraph />

<details>
<summary style={{fontSize: 24 }}>
<b>Data used for default line graph</b>
</summary>

### Graph Config object
<DefaultGraphConfig />

### Data object
<DefaultDataObject />
</details>

<br/><br/><br/>
<TimeseriesLineGraph />

<details>
<summary style={{fontSize: 24 }}>
<b>Data used for timeseries line graph</b>
</summary>

### Graph Config object
<TimeseriesGraphConfig />

### Data object
<TimeseriesDataObject />
</details>
